<!DOCTYPE html><html class="theme-next gemini" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

<link href="/css/main.css" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-me.png">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-me.png">


  <link rel="mask-icon" href="/images/logo.svg" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    fastclick: true,
    lazyload: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="前言目前使用到的 Linux 系统主要是 ubuntu 与 centos 系统。    系统 发行版本 command 内核版本、位数     RedHat cat /etc/issue cat /etc/redhat-release lsb_release -a   CentOS cat /etc/issue cat /etc/centos-release cat /proc/version">
<meta name="keywords" content="linux,centos,ubuntu,shell">
<meta property="og:type" content="article">
<meta property="og:title" content="linux-note">
<meta property="og:url" content="http://www.jiaobuzuji.com/blogs/linux-note/index.html">
<meta property="og:site_name" content="Jiaobuzuji's Pages">
<meta property="og:description" content="前言目前使用到的 Linux 系统主要是 ubuntu 与 centos 系统。    系统 发行版本 command 内核版本、位数     RedHat cat /etc/issue cat /etc/redhat-release lsb_release -a   CentOS cat /etc/issue cat /etc/centos-release cat /proc/version">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-02-06T16:57:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux-note">
<meta name="twitter:description" content="前言目前使用到的 Linux 系统主要是 ubuntu 与 centos 系统。    系统 发行版本 command 内核版本、位数     RedHat cat /etc/issue cat /etc/redhat-release lsb_release -a   CentOS cat /etc/issue cat /etc/centos-release cat /proc/version">






  <link rel="canonical" href="http://www.jiaobuzuji.com/blogs/linux-note/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>linux-note | Jiaobuzuji's Pages</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Jiaobuzuji's Pages</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <h1 class="site-subtitle" itemprop="description">现在就是未来</h1>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档<span class="badge">21</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签<span class="badge">33</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类<span class="badge">12</span></a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.jiaobuzuji.com/blogs/linux-note/">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiaobuzuji">
      <meta itemprop="description" content="工作与生活分不清楚的 ASIC 数字前端程序猿">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Jiaobuzuji's Pages">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">linux-note
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-02-06 16:57:33" itemprop="dateCreated datePublished" datetime="2018-02-06T16:57:33+00:00">2018-02-06</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/System/" itemprop="url" rel="index"><span itemprop="name">System</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/System/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blogs/linux-note/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/blogs/linux-note/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>目前使用到的 Linux 系统主要是 ubuntu 与 centos 系统。</p>
<table>
<thead>
<tr>
<th style="text-align:left">系统</th>
<th style="text-align:left">发行版本</th>
<th>command</th>
<th>内核版本、位数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">RedHat</td>
<td style="text-align:left">cat /etc/issue</td>
<td>cat /etc/redhat-release</td>
<td>lsb_release -a</td>
</tr>
<tr>
<td style="text-align:left">CentOS</td>
<td style="text-align:left">cat /etc/issue</td>
<td>cat /etc/centos-release</td>
<td>cat /proc/version</td>
</tr>
<tr>
<td style="text-align:left">Debian</td>
<td style="text-align:left">cat /etc/issue</td>
<td>cat /etc/debian_version</td>
<td>cat /proc/version</td>
</tr>
<tr>
<td style="text-align:left">Ubuntu</td>
<td style="text-align:left">cat /etc/issue</td>
<td>cat /etc/lsb_release</td>
<td>cat /proc/version</td>
</tr>
<tr>
<td style="text-align:left">Oracle</td>
<td style="text-align:left">cat /etc/issue</td>
<td>cat /etc/oracle-release</td>
<td>lsb_release -a</td>
</tr>
</tbody>
</table>
<h2 id="Perl-相关"><a href="#Perl-相关" class="headerlink" title="Perl 相关"></a>Perl 相关</h2><h2 id="安装到-local"><a href="#安装到-local" class="headerlink" title="安装到 local"></a>安装到 local</h2><p>要设置以下几个环境变量<br></p><figure class="highlight dos"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">PATH</span></span><br><span class="line">MANPATH</span><br><span class="line">LD_LIBRARY_PATH</span><br><span class="line">C_INCLUDE_PATH</span><br><span class="line">LIBRARY_PATH</span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="关于login-interactive-no-interactive-shell和profile-bash-profile-bashrc"><a href="#关于login-interactive-no-interactive-shell和profile-bash-profile-bashrc" class="headerlink" title="关于login/interactive/no-interactive shell和profile/bash_profile/bashrc"></a>关于login/interactive/no-interactive shell和profile/bash_profile/bashrc</h2><p>login shell：第一次登录进系统时的shell，一般是指本机启动时的控制台shell或者ssh远程登录时的shell。</p>
<p>interactive shell：登录以后，再打开控制台时运行的shell。</p>
<p>none interactive shell：只是用来执行脚本的shell，执行完就结束进程了，没有用户交互过程。</p>
<p>mac有个特殊地方：每次打开一个终端都是一个login shell。</p>
<p>使用shell的执行选项<br>上一节所述的调试手段是通过修改shell脚本的源代码，令其输出相关的调试信息来定位错误的，那有没有不修改源代码来调试shell脚本的方法呢？答案 就是使用shell的执行选项，本节将介绍一些常用选项的用法：</p>
<p>-n 只读取shell脚本，但不实际执行<br>-x 进入跟踪方式，显示所执行的每一条命令<br>-c “string” 从strings中读取命令</p>
<p>“-n”可用于测试shell脚本是否存在语法错误，但不会实际执行命令。在shell脚本编写完成之后，实际执行之前，首先使用“-n”选项来测试脚本 是否存在语法错误是一个很好的习惯。因为某些shell脚本在执行时会对系统环境产生影响，比如生成或移动文件等，如果在实际执行才发现语法错误，您不得 不手工做一些系统环境的恢复工作才能继续测试这个脚本。<br>“-c”选项使shell解释器从一个字符串中而不是从一个文件中读取并执行shell命令。当需要临时测试一小段脚本的执行结果时，可以使用这个选项， 如下所示：<br>sh -c ‘a=1;b=2;let c=$a+$b;echo “c=$c”‘<br>“-x”选项可用来跟踪脚本的执行，是调试shell脚本的强有力工具。“-x”选项使shell在执行脚本的过程中把它实际执行的每一个命令行显示出 来，并且在行首显示一个”+”号。 “+”号后面显示的是经过了变量替换之后的命令行的内容，有助于分析实际执行的是什么命令。 “-x”选项使用起来简单方便，可以轻松对付大多数的shell调试任务,应把其当作首选的调试手段。</p>
<h2 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h2><p>在linux中，常常都要提示设置：<br>     umask 022</p>
<p>其作用如下：</p>
<p>功能说明：指定在建立文件时预设的权限掩码。<br>语　　法：umask [-S][权限掩码]<br>补充说明：umask可用来设定[权限掩码]。[权限掩码]是由3个八进制的数字所组成，将现有的存取权限减掉权限掩码后，即可产生建立文件时预设的权限。<br>参　　数：<br>-S 　以文字的方式来表示权限掩码。<br>文件：用八进制基数666，即无x位（可执行位）rw- rw- rw-.执行位需由用户自行加入</p>
<p>例一：设要生成的文件以rw- r– r–这样的权限字出现，即真实权限用八进制表示为644，则被666基数减得022，022即掩码。使用umask 022。</p>
<p>注：033效果与022一样，假设使用033掩码进行设置，则真实权限应为633即rw- r-x r-x ，但前提规定文件不生成x位，所以文件的权限最终将以rw-r–r–出现。</p>
<p>目录：用八进制基数777</p>
<p>例二：设要生成的目录权限以rwxr-xr-x这样的权限字出现，即真实权限用八进制表示为755，则被基数为777的权限字相减后，得掩码022。则使用umask 022进行设置。</p>
<p>总结：</p>
<p>掌握二个要点，一、文件基数为666，目录为777，即文件无设x位，目录可设x位。二、chmod是设哪个位，哪么哪个位就有权限，而umask是设哪个位，则哪个位上就没权限。</p>
<h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="selector-tag">b</span> <span class="number">4096</span> -C <span class="string">"your_email@example.com"</span></span><br></pre></td></tr></tbody></table></figure>
<p><a href="https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/linux/l-cn-sshforward/</a></p>
<p>linux ssh_config和sshd_config配置文件</p>
<p>ssh_config和sshd_config都是ssh服务器的配置文件，二者区别在于，前者是针对客户端的配置文件，后者则是针对服务端的配置文件。两个配置文件都允许你通过设置不同的选项来改变客户端程序的运行方式。下面列出来的是两个配置文件中最重要的一些关键词，每一行为“关键词&amp;值”的形式，其中“关键词”是忽略大小写的。<br>1、编辑 /etc/ssh/ssh_config 文件</p>
<h1 id="Site-wide-defaults-for-various-options"><a href="#Site-wide-defaults-for-various-options" class="headerlink" title="Site-wide defaults for various options"></a>Site-wide defaults for various options</h1><p>   Host *<br>        ForwardAgent no<br>        ForwardX11 no<br>        RhostsAuthentication no<br>        RhostsRSAAuthentication no<br>        RSAAuthentication yes<br>        PasswordAuthentication yes<br>        FallBackToRsh no<br>        UseRsh no<br>        BatchMode no<br>        CheckHostIP yes<br>        StrictHostKeyChecking no<br>        IdentityFile ~/.ssh/identity<br>        Port 22<br>        Cipher blowfish<br>        EscapeChar ~</p>
<p>下面对上述选项参数逐进行解释：</p>
<h1 id="Site-wide-defaults-for-various-options-1"><a href="#Site-wide-defaults-for-various-options-1" class="headerlink" title="Site-wide defaults for various options"></a>Site-wide defaults for various options</h1><p>带“#”表示该句为注释不起作，该句不属于配置文件原文，意在说明下面选项均为系统初始默认的选项。说明一下，实际配置文件中也有很多选项前面加有“#”注释，虽然表示不起作用，其实是说明此为系统默认的初始化设置。<br>Host <em><br>“Host”只对匹配后面字串的计算机有效，“</em>”表示所有的计算机。从该项格式前置一些可以看出，这是一个类似于全局的选项，表示下面缩进的选项都适用于该设置，可以指定某计算机替换*号使下面选项只针对该算机器生效。<br>ForwardAgent no<br>“ForwardAgent”设置连接是否经过验证代理（如果存在）转发给远程计算机。<br>ForwardX11 no<br>“ForwardX11”设置X11连接是否被自动重定向到安全的通道和显示集（DISPLAY set）。<br>RhostsAuthentication no<br>“RhostsAuthentication”设置是否使用基于rhosts的安全验证。<br>RhostsRSAAuthentication no<br>“RhostsRSAAuthentication”设置是否使用用RSA算法的基于rhosts的安全验证。<br>RSAAuthentication yes<br>“RSAAuthentication”设置是否使用RSA算法进行安全验证。<br>PasswordAuthentication yes<br>“PasswordAuthentication”设置是否使用口令验证。<br>FallBackToRsh no<br>“FallBackToRsh”设置如果用ssh连接出现错误是否自动使用rsh，由于rsh并不安全，所以此选项应当设置为”no”。<br>UseRsh no<br>“UseRsh”设置是否在这台计算机上使用”rlogin/rsh”，原因同上，设为”no”。<br>BatchMode no<br>“BatchMode”：批处理模式，一般设为”no”；如果设为”yes”，交互式输入口令的提示将被禁止，这个选项对脚本文件和批处理任务十分有用。<br>CheckHostIP yes<br>“CheckHostIP”设置ssh是否查看连接到服务器的主机的IP地址以防止DNS欺骗。建议设置为”yes”。<br>StrictHostKeyChecking no<br>“StrictHostKeyChecking”如果设为”yes”，ssh将不会自动把计算机的密匙加入”$HOME/.ssh/known_hosts”文件，且一旦计算机的密匙发生了变化，就拒绝连接。<br>IdentityFile ~/.ssh/identity<br>“IdentityFile”设置读取用户的RSA安全验证标识。<br>Port 22<br>“Port”设置连接到远程主机的端口，ssh默认端口为22。<br>Cipher blowfish<br>“Cipher”设置加密用的密钥，blowfish可以自己随意设置。<br>EscapeChar ~<br>“EscapeChar”设置escape字符。<br>2、编辑 /etc/ssh/sshd_config 文件：‍</p>
<h1 id="This-is-ssh-server-systemwide-configuration-file"><a href="#This-is-ssh-server-systemwide-configuration-file" class="headerlink" title="This is ssh server systemwide configuration file."></a>This is ssh server systemwide configuration file.</h1><pre><code>Port 22
ListenAddress 192.168.1.1
HostKey /etc/ssh/ssh_host_key
ServerKeyBits 1024
LoginGraceTime 600
KeyRegenerationInterval 3600
PermitRootLogin no
IgnoreRhosts yes
IgnoreUserKnownHosts yes
StrictModes yes
X11Forwarding no
PrintMotd yes
SyslogFacility AUTH
LogLevel INFO
RhostsAuthentication no
RhostsRSAAuthentication no
RSAAuthentication yes
PasswordAuthentication yes
PermitEmptyPasswords no
AllowUsers admin
</code></pre><p>‍下面逐行说明上面的选项设置：<br>Port 22<br>“Port”设置sshd监听的端口号。<br>ListenAddress 192.168.1.1<br>“ListenAddress”设置sshd服务器绑定的IP地址。<br>HostKey /etc/ssh/ssh_host_key<br>“HostKey”设置包含计算机私人密匙的文件。<br>ServerKeyBits 1024<br>“ServerKeyBits”定义服务器密匙的位数。<br>LoginGraceTime 600<br>“LoginGraceTime”设置如果用户不能成功登录，在切断连接之前服务器需要等待的时间（以秒为单位）。<br>KeyRegenerationInterval 3600<br>“KeyRegenerationInterval”设置在多少秒之后自动重新生成服务器的密匙（如果使用密匙）。重新生成密匙是为了防止用盗用的密匙解密被截获的信息。<br>PermitRootLogin no<br>“PermitRootLogin”设置是否允许root通过ssh登录。这个选项从安全角度来讲应设成”no”。<br>IgnoreRhosts yes<br>“IgnoreRhosts”设置验证的时候是否使用“rhosts”和“shosts”文件。<br>IgnoreUserKnownHosts yes<br>“IgnoreUserKnownHosts”设置ssh daemon是否在进行RhostsRSAAuthentication安全验证的时候忽略用户的”$HOME/.ssh/known_hosts”<br>StrictModes yes<br>“StrictModes”设置ssh在接收登录请求之前是否检查用户家目录和rhosts文件的权限和所有权。这通常是必要的，因为新手经常会把自己的目录和文件设成任何人都有写权限。<br>X11Forwarding no<br>“X11Forwarding”设置是否允许X11转发。<br>PrintMotd yes<br>“PrintMotd”设置sshd是否在用户登录的时候显示“/etc/motd”中的信息。<br>SyslogFacility AUTH<br>“SyslogFacility”设置在记录来自sshd的消息的时候，是否给出“facility code”。<br>LogLevel INFO<br>“LogLevel”设置记录sshd日志消息的层次。INFO是一个好的选择。查看sshd的man帮助页，已获取更多的信息。<br>RhostsAuthentication no<br>“RhostsAuthentication”设置只用rhosts或“/etc/hosts.equiv”进行安全验证是否已经足够了。<br>RhostsRSAAuthentication no<br>“RhostsRSA”设置是否允许用rhosts或“/etc/hosts.equiv”加上RSA进行安全验证。<br>RSAAuthentication yes<br>“RSAAuthentication”设置是否允许只有RSA安全验证。<br>PasswordAuthentication yes<br>“PasswordAuthentication”设置是否允许口令验证。<br>PermitEmptyPasswords no<br>“PermitEmptyPasswords”设置是否允许用口令为空的帐号登录。<br>AllowUsers admin<br>“AllowUsers”的后面可以跟任意的数量的用户名的匹配串，这些字符串用空格隔开。主机名可以是域名或IP地址。</p>
<p>通常情况下我们在连接 OpenSSH服务器的时候假如 UseDNS选项是打开的话，服务器会先根据客户端的 IP地址进行 DNS PTR反向查询出客户端的主机名，然后根据查询出的客户端主机名进行DNS正向A记录查询，并验证是否与原始 IP地址一致，通过此种措施来防止客户端欺骗。平时我们都是动态 IP不会有PTR记录，所以打开此选项也没有太多作用。我们可以通过关闭此功能来提高连接 OpenSSH 服务器的速度。</p>
<p>服务端步骤如下：<br>编辑配置文件 /etc/ssh/sshd_config<br>vim /etc/ssh/sshd_config<br>找到 UseDNS选项，如果没有注释，将其注释 </p>
<p>#UseDNS yes<br>添加<br>UseDNS no</p>
<p>找到 GSSAPIAuthentication选项，如果没有注释，将其注释 </p>
<p>#GSSAPIAuthentication yes<br>添加<br>GSSAPIAuthentication no</p>
<p>保存配置文件</p>
<p>重启 OpenSSH服务器<br>/etc/init.d/sshd restart</p>
<p>Putty server refused our key的三种原因和解决方法<br>1、.ssh文件夹权限错<br>.ssh 以及其父文件夹（root为/root，普通用户为Home目录）都应该设置为只有该用户可写（比如700）。</p>
<p>以下为原因：</p>
<p>ssh服务器的key方式登录对权限要求严格。对于客户端: 私钥必须为600权限或者更严格权限(400), 一旦其他用户可读, 私钥就不起作用(如640), 表现为系统认为不存在私钥<br>对于服务器端: 要求必须公钥其他用户不可写, 一旦其他用户可写(如660), 就无法用key登录, 表现为:Permission denied (publickey).<br>同时要求.ssh目录其他用户不可写,一旦其他用户可写(如770), 就无法使用key登录, 表现为:Permission denied (publickey).<br></p><figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 ~<span class="string">/.ssh</span></span><br><span class="line">chmod 600 ~<span class="string">/.ssh/authorized_keys</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p>2、SElinux导致</p>
<p>密钥文件不能通过SElinux认证，解决方法如下：<br>1</p>
<h1 id="restorecon-R-v-home-root用户为-root"><a href="#restorecon-R-v-home-root用户为-root" class="headerlink" title="restorecon -R -v /home #root用户为/root"></a>restorecon -R -v /home #root用户为/root</h1><p>我遇到的就是这种情况，找了好久还找到是这个原因，因为是新装的虚拟机，SElinux还没关闭。</p>
<p>这篇博文详细得说明了原因：<a href="http://www.toxingwang.com/linux-unix/linux-basic/846.html" target="_blank" rel="noopener">http://www.toxingwang.com/linux-unix/linux-basic/846.html</a></p>
<p>3、sshd配置不正确</p>
<p>正确配置方法如下：</p>
<p>/etc/ssh/sshd_config 1、找到 #StrictModes yes 改成 StrictModes no （去掉注释后改成 no） 2、找到 #PubkeyAuthentication yes 改成 PubkeyAuthentication yes （去掉注释） 3、找到 #AuthorizedKeysFile .ssh/authorized_keys 改成 AuthorizedKeysFile .ssh/authorized_keys （去掉注释） 4、保存 5、/etc/rc.d/init.d/sshd reload 重新加载</p>
<h2 id="ssh-config"><a href="#ssh-config" class="headerlink" title="~/.ssh/config"></a>~/.ssh/config</h2><p>在 ~/.ssh/config 添加配置内容，这样就可以使用 <code>ssh github</code> 来快速连接，同时也可以使用 <code>scp xxx github:~/xxx</code> 来传输数据，比较方便。<br></p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Host</span> <span class="selector-tag">github</span></span><br><span class="line">    <span class="selector-tag">HostName</span> <span class="selector-tag">github</span><span class="selector-class">.com</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="VNC"><a href="#VNC" class="headerlink" title="VNC"></a>VNC</h2><p>VNC概述</p>
<p>   VNC (Virtual Network Computing)是虚拟网络计算机的缩写。VNC 是一款优秀的远程控制工具软件，由著名的 AT&amp;T 的欧洲研究实验室开发的。VNC 是在基于 UNIX 和 Linux操作系统的免费的开源软件，远程控制能力强大，高效实用，其性能可以和 Windows 或 MAC 中的任何远程控制软件媲美。在 Linux 中，VNC 包括以下四个命令：vncserver，vncviewer，vncpasswd，和 vncconnect。大多数情况下只需要其中的两个命令：vncserver 和 vncviewer。目前，原来的AT&amp;T版本已经不再使用，因为更多有重大改善的分支版本已经出现， 像是RealVNC， VNC tight 和UltraVNC。 Real VNC 是当前最活跃和强大的主流应用。</p>
<p> RealVNC官方网址  :  <a href="http://www.realvnc.com/" target="_blank" rel="noopener">http://www.realvnc.com/</a></p>
<p> Tight VNC官方网址:  <a href="http://www.tightvnc.com/" target="_blank" rel="noopener">http://www.tightvnc.com/</a></p>
<p> UltraVNC官方网址 ： <a href="http://www.uvnc.com/" target="_blank" rel="noopener">http://www.uvnc.com/</a></p>
<p>VNC原理</p>
<p>VNC系统由客户端，服务端和一个协议组成。VNC的服务端目的是分享其所运行机器的屏幕， 服务端被动的允许客户端控制它。 VNC客户端（或Viewer） 观察控制服务端，与服务端交互。 VNC 协议 Protocol (RFB)是一个简单的协议，传送服务端的原始图像到客户端（一个X,Y 位置上的正方形的点阵数据）， 客户端传送事件消息到服务端。</p>
<p>服务器发送小方块的帧缓存给客户端，在最简单的情况，VNC协议使用大量的带宽，因此各种各样的方法被发明出来减少通讯的开支，举例来说，有各种各样的编码方法来决定最有效率的方法来传送这些点阵方块）</p>
<p>协议允许客户端和服务端去协议哪种编码会被使用，最简单的编码，被大多数客户端和服务端所支持的是， 从左到右的像素扫描数据的原始编码， 当原始的满屏被发送后，只发送变化的方块区域。这种编码在幁间只有小部分屏幕变化的情况下工作的非常好（像是鼠标键在桌面移动的情况，或在光标处敲击文字），不过如果大量的像素同时变化带宽将会增加的非常高，像是拖动一个窗口或观看全屏录像。</p>
<p>VNC默认使用TCP端口5900至5906，而JAVA的VNC客户端使用5800至5806。一个服务端可以在5500口用“监听模式”连接一个客户端，使用监听模式的一个好处是服务端不需要设置防火墙。</p>
<p>UNIX上的VNC称为xvnc，同时扮演两种角色，对X窗口系统的应用程序来说它是X server，对于VNC客户端来说它是VNC服务器程序。</p>
<p>实验环境</p>
<pre><code>VNC服务端：

        操作系统：Red Hat Enterprise Linux Server release 5.7 (Tikanga)

VNC客户端：

        操作系统：Windows 7专业版  64位操作系统
</code></pre><p>VNC安装配置</p>
<p>1、安装VNC包</p>
<p>[root@localhost /]# cd  /depot/os/mnt/cdrom/Server</p>
<p>[root@localhost /]# rpm -ivh vnc-server-4.1.2-14.el5_6.6.x86_64.rpm</p>
<p>[root@localhost /]# rpm -ivh vnc-4.1.2-14.el5_6.6.x86_64.rpm</p>
<p>验证vnc-server包是否安装成功：</p>
<p>[root@localhost /]# rpm -qa vnc-server</p>
<p>vnc-server-4.1.2-14.el5_6.6</p>
<p>2、配置vncservers文件</p>
<p>修改/etc/sysconfig/vncservers文件，未经修改的vncservers文件如下所示：</p>
<p>[root@localhost ~]# more /etc/sysconfig/vncservers</p>
<h1 id="The-VNCSERVERS-variable-is-a-list-of-display-user-pairs"><a href="#The-VNCSERVERS-variable-is-a-list-of-display-user-pairs" class="headerlink" title="The VNCSERVERS variable is a list of display:user pairs."></a>The VNCSERVERS variable is a list of display:user pairs.</h1><p>#</p>
<h1 id="Uncomment-the-lines-below-to-start-a-VNC-server-on-display-2"><a href="#Uncomment-the-lines-below-to-start-a-VNC-server-on-display-2" class="headerlink" title="Uncomment the lines below to start a VNC server on display :2"></a>Uncomment the lines below to start a VNC server on display :2</h1><h1 id="as-my-‘myusername’-adjust-this-to-your-own-You-will-also"><a href="#as-my-‘myusername’-adjust-this-to-your-own-You-will-also" class="headerlink" title="as my ‘myusername’ (adjust this to your own).  You will also"></a>as my ‘myusername’ (adjust this to your own).  You will also</h1><h1 id="need-to-set-a-VNC-password-run-‘man-vncpasswd’-to-see-how"><a href="#need-to-set-a-VNC-password-run-‘man-vncpasswd’-to-see-how" class="headerlink" title="need to set a VNC password; run ‘man vncpasswd’ to see how"></a>need to set a VNC password; run ‘man vncpasswd’ to see how</h1><h1 id="to-do-that"><a href="#to-do-that" class="headerlink" title="to do that."></a>to do that.</h1><p>#</p>
<h1 id="DO-NOT-RUN-THIS-SERVICE-if-your-local-area-network-is"><a href="#DO-NOT-RUN-THIS-SERVICE-if-your-local-area-network-is" class="headerlink" title="DO NOT RUN THIS SERVICE if your local area network is"></a>DO NOT RUN THIS SERVICE if your local area network is</h1><h1 id="untrusted-For-a-secure-way-of-using-VNC-see"><a href="#untrusted-For-a-secure-way-of-using-VNC-see" class="headerlink" title="untrusted!  For a secure way of using VNC, see"></a>untrusted!  For a secure way of using VNC, see</h1><h1 id="URL-http-www-uk-research-att-com-archive-vnc-sshvnc-html"><a href="#URL-http-www-uk-research-att-com-archive-vnc-sshvnc-html" class="headerlink" title="URL:http://www.uk.research.att.com/archive/vnc/sshvnc.html."></a><a href="URL:http://www.uk.research.att.com/archive/vnc/sshvnc.html" target="_blank" rel="noopener">URL:http://www.uk.research.att.com/archive/vnc/sshvnc.html</a>.</h1><h1 id="Use-“-nolisten-tcp”-to-prevent-X-connections-to-your-VNC-server-via-TCP"><a href="#Use-“-nolisten-tcp”-to-prevent-X-connections-to-your-VNC-server-via-TCP" class="headerlink" title="Use “-nolisten tcp” to prevent X connections to your VNC server via TCP."></a>Use “-nolisten tcp” to prevent X connections to your VNC server via TCP.</h1><h1 id="Use-“-nohttpd”-to-prevent-web-based-VNC-clients-connecting"><a href="#Use-“-nohttpd”-to-prevent-web-based-VNC-clients-connecting" class="headerlink" title="Use “-nohttpd” to prevent web-based VNC clients connecting."></a>Use “-nohttpd” to prevent web-based VNC clients connecting.</h1><h1 id="Use-“-localhost”-to-prevent-remote-VNC-clients-connecting-except-when"><a href="#Use-“-localhost”-to-prevent-remote-VNC-clients-connecting-except-when" class="headerlink" title="Use “-localhost” to prevent remote VNC clients connecting except when"></a>Use “-localhost” to prevent remote VNC clients connecting except when</h1><h1 id="doing-so-through-a-secure-tunnel-See-the-“-via”-option-in-the"><a href="#doing-so-through-a-secure-tunnel-See-the-“-via”-option-in-the" class="headerlink" title="doing so through a secure tunnel.  See the “-via” option in the"></a>doing so through a secure tunnel.  See the “-via” option in the</h1><h1 id="man-vncviewer’-manual-page"><a href="#man-vncviewer’-manual-page" class="headerlink" title="`man vncviewer’ manual page."></a>`man vncviewer’ manual page.</h1><h1 id="VNCSERVERS-”2-myusername”"><a href="#VNCSERVERS-”2-myusername”" class="headerlink" title="VNCSERVERS=”2:myusername”"></a>VNCSERVERS=”2:myusername”</h1><h1 id="VNCSERVERARGS-2-”-geometry-800x600-nolisten-tcp-nohttpd-localhost”"><a href="#VNCSERVERARGS-2-”-geometry-800x600-nolisten-tcp-nohttpd-localhost”" class="headerlink" title="VNCSERVERARGS[2]=”-geometry 800x600 -nolisten tcp -nohttpd -localhost”"></a>VNCSERVERARGS[2]=”-geometry 800x600 -nolisten tcp -nohttpd -localhost”</h1><p>clip_image002</p>
<p>将最后两行配置信息取消注释，添加系统账号</p>
<p>VNCSERVERS=”1:root 2：etl”</p>
<p>VNCSERVERARGS[1]=”-geometry 1024x768 -nolisten tcp -nohttpd “</p>
<p>VNCSERVERARGS[2]=”-geometry 1024x768 -nolisten tcp -nohttpd “</p>
<p>VNCSERVERS 是用来设定可以使用VNC的服务器账号，可以设定多个，例如上面root、etl，但是中间要用空格隔开。使用VNCVIEWER登录时，192.168.48.128:1表示是以root账号登录，以此类推。</p>
<p>关于参数配置说明：</p>
<p>1：-geometry 表示桌面分辨率，默认为1024x768，所以上面的1024x768也可以不写。</p>
<p>2：-nohttpd  表示不监听HTTP端口（58xx）。</p>
<p>3：-nolisten tcp 表示不监听TCP端口（60xx）</p>
<p>4：-localhost 只运行从本机访问。</p>
<p>5：AlwaysShared 默认只允许一个VNCVIEWER连接，此参数表示同一个显示端口允许多用户同时登录.</p>
<p>6：-depth  表示色深，参数有8,16,24,32.</p>
<p>7: SecurityTypes None 登录不需要密码认证VncAuth默认值,要密码认证。</p>
<p>3、设置VNC用户密码</p>
<p>如果此时不设置VNC用户密码，启动vncserver服务，则会报如下错误：</p>
<p>[root@localhost ~]# service vncserver start</p>
<p>Starting VNC server: 1:root [FAILED]</p>
<p>[root@localhost /]# vncpasswd</p>
<p>Password:</p>
<p>Verify:</p>
<p>[root@localhost /]# su - etl</p>
<p>[etl@localhost ~]$ vncpasswd</p>
<p>Password:</p>
<p>Verify:</p>
<p>[etl@localhost ~]$</p>
<p>4、启动vncserver服务</p>
<p>[root@localhost ~]# service vncserver start</p>
<p>Starting VNC server: 1:root</p>
<p>New ‘localhost.localdomain:1 (root)’ desktop is localhost.localdomain:1</p>
<p>Creating default startup script /root/.vnc/xstartup</p>
<p>Starting applications specified in /root/.vnc/xstartup</p>
<p>Log file is /root/.vnc/localhost.localdomain:1.log</p>
<p>2:etl</p>
<p>New ‘localhost.localdomain:2 (etl)’ desktop is localhost.localdomain:2</p>
<p>Creating default startup script /home/etl/.vnc/xstartup</p>
<p>Starting applications specified in /home/etl/.vnc/xstartup</p>
<p>Log file is /home/etl/.vnc/localhost.localdomain:2.log</p>
<p>[  OK  ]</p>
<p>VNC会在用户根目录($HOME)下的”.vnc”文件夹下生成一系列文件。其中passwd为vnc用户密码文件，由vncpasswd生成。其他的都由vnc初次启动时生成，xstartup为VNC客户端连接时启动的脚本</p>
<p>5、配置xstartup文件</p>
<p>如下所示，将下面紫红色的部分注释取消。</p>
<p>clip_image004</p>
<p>#!/bin/sh</p>
<h1 id="Uncomment-the-following-two-lines-for-normal-desktop"><a href="#Uncomment-the-following-two-lines-for-normal-desktop" class="headerlink" title="Uncomment the following two lines for normal desktop:"></a>Uncomment the following two lines for normal desktop:</h1><p>unset SESSION_MANAGER</p>
<p>exec /etc/X11/xinit/xinitrc</p>
<p>[ -x /etc/vnc/xstartup ] &amp;&amp; exec /etc/vnc/xstartup</p>
<p>[ -r $HOME/.Xresources ] &amp;&amp; xrdb $HOME/.Xresources</p>
<p>xsetroot -solid grey</p>
<p>vncconfig -iconic &amp;</p>
<p>xterm -geometry 80x24+10+10 -ls -title “$VNCDESKTOP Desktop” &amp;</p>
<p>twm &amp;</p>
<p>切换到etl账号，依法炮制</p>
<p>[root@localhost ~]# su - etl</p>
<p>[etl@localhost ~]$ vi /home/etl/.vnc/xstartup</p>
<p>clip_image006</p>
<p>[root@localhost ~]# service vncserver restart</p>
<p>Shutting down VNC server: 1:root 2:etl [  OK  ]</p>
<p>Starting VNC server: 1:root</p>
<p>New ‘localhost.localdomain:1 (root)’ desktop is localhost.localdomain:1</p>
<p>Starting applications specified in /root/.vnc/xstartup</p>
<p>Log file is /root/.vnc/localhost.localdomain:1.log</p>
<p>2:etl</p>
<p>New ‘localhost.localdomain:2 (etl)’ desktop is localhost.localdomain:2</p>
<p>Starting applications specified in /home/etl/.vnc/xstartup</p>
<p>Log file is /home/etl/.vnc/localhost.localdomain:2.log</p>
<p>[  OK  ]</p>
<p>6、配置防火墙</p>
<p>如果你不配置防火墙，此时用VNC Viewer连接的话，一般会报：”connect：Connection timed out(10060)”错误,如下所示：</p>
<p>clip_image008</p>
<p>clip_image010</p>
<p>一般这种情况要么关闭防火墙，要么需要配置防火墙。</p>
<p>[root@localhost ~]# service iptables stop</p>
<p>Flushing firewall rules: [  OK  ]</p>
<p>Setting chains to policy ACCEPT: filter [  OK  ]</p>
<p>Unloading iptables modules: [  OK  ]</p>
<p>关闭防火墙后，用VNCView连接服务器没有问题，但是一般不建议关闭防火墙，</p>
<p>[root@localhost ~]# service iptables restart</p>
<p>Flushing firewall rules: [  OK  ]</p>
<p>Setting chains to policy ACCEPT: filter [  OK  ]</p>
<p>Unloading iptables modules: [  OK  ]</p>
<p>Applying iptables firewall rules: [  OK  ]</p>
<p>Loading additional iptables modules: ip_conntrack_netbios_ns [  OK  ]</p>
<p>[root@localhost ~]# iptables -I INPUT -p tcp –dport 5901 -j ACCEPT</p>
<p>[root@localhost ~]# iptables -I INPUT -p tcp –dport 5902 -j ACCEPT</p>
<p>clip_image012</p>
<p>OK，可以通过VNC连接到服务器了</p>
<p>关于VNC服务使用的端口号与桌面号相关，VNC使用TCP端口从5900开始，对应关系如下<br>桌面号为“1” —- 端口号为5901<br>桌面号为“2” —- 端口号为5902<br>桌面号为“3” —- 端口号为5903<br>……<br>基于Java的VNC客户程序Web服务TCP端口从5800开始，也是与桌面号相关，对应关系如下<br>桌面号为“1” —- 端口号为5801<br>桌面号为“2” —- 端口号为5802<br>桌面号为“3” —- 端口号为5803<br>基于上面的介绍，如果Linux开启了防火墙功能，就需要手工开启相应的端口，以开启桌面号为“1”相应的端口为例，命令如下</p>
<p>开机自启动vncserver服务</p>
<h1 id="chkconfig-vncserver-on"><a href="#chkconfig-vncserver-on" class="headerlink" title="chkconfig vncserver on"></a>chkconfig vncserver on</h1><p>[参考资料]：</p>
<p><a href="http://zh.wikipedia.org/wiki/VNC" target="_blank" rel="noopener">http://zh.wikipedia.org/wiki/VNC</a></p>
<p><a href="http://www.ha97.com/4634.html" target="_blank" rel="noopener">http://www.ha97.com/4634.html</a></p>
<p><a href="http://blog.sina.com.cn/s/blog_48f9c0840100x2qh.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_48f9c0840100x2qh.html</a></p>
<h2 id="Meta"><a href="#Meta" class="headerlink" title="Meta"></a>Meta</h2><h3 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h3><p>ubuntu 删除出现 /var/lib/dpkg/lock 时的解决方法<br></p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo rm /var/cache/apt/archives/lock</span><br><span class="line">$ sudo rm /var/lib/dpkg/lock</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>快速复制到剪贴板</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ clip &lt; file.txt</span><br></pre></td></tr></tbody></table></figure>
<h2 id="前言-1"><a href="#前言-1" class="headerlink" title="前言"></a>前言</h2><p>安装字体</p>
<ol>
<li>下载 Consolas 字体，然后<br>sudo mkdir -p /usr/share/fonts/yahei<br>sudo cp YaHei.Consolas.1.12.ttf /usr/share/fonts/yahei/<br>然后，改变权限：<br>sudo chmod 644 /usr/share/fonts/yahei/YaHei.Consolas.1.12.ttf<br>安装：<br>cd /usr/share/fonts/yahei/<br>sudo mkfontscale<br>sudo mkfontdir<br>sudo fc-cache -fv</li>
</ol>
<p>boot 空间不够：<br>dpkg –get-selections|grep linux  查看有哪些多余的 kernal<br>sudo apt-get remove linux-image-(版本号)（就是上面带image的版本）<br>有卸载不完全的（有提示），可以用 sudo apt-get autoremove来删除。<br>sudo dpkg -P linux-image-xxx 清除出现 <code>deinstall</code> 的 list</p>
<h2 id="tmux"><a href="#tmux" class="headerlink" title="tmux"></a>tmux</h2><p><a href="https://wiki.archlinux.org/index.php/tmux" target="_blank" rel="noopener">https://wiki.archlinux.org/index.php/tmux</a></p>
<p>高版本的 tmux 。可以支持 vim 的 termguicolor 这一点比较好。</p>
<p>复制的时候，如果直接用鼠标复制的时候，是又vim处理的，需要按住shift才是xterm处理的，<br>后测试了下，果然可以，后来用vnc连server发现在vim中也是同样适用的，高兴</p>
<p>tmux使用C/S模型构建，主要包括以下单元模块：</p>
<ul>
<li>server服务器。输入tmux命令时就开启了一个服务器。</li>
<li>session会话。一个服务器可以包含多个会话</li>
<li>window窗口。一个会话可以包含多个窗口。</li>
<li>pane面板。一个窗口可以包含多个面板。</li>
</ul>
<p>tmux里的session，window,pane<br>—-</p>
<p>session指的是按下tmux命令后 存在的连接便是session<br>创建session<br>tmux</p>
<p>创建并指定session名字<br>tmux new -s $session_name</p>
<p>删除session<br>Ctrl+b :kill-session</p>
<p>临时退出session<br>Ctrl+b d</p>
<p>列出session<br>tmux ls</p>
<p>进入已存在的session<br>tmux a -t $session_name</p>
<p>删除所有session<br>Ctrl+b :kill-server</p>
<p>删除指定session<br>tmux kill-session -t $session_name</p>
<p>—-</p>
<p>window在session里，可以有N个window，并且window可以在不同的session里移动<br>创建window<br>Ctrl+b +c</p>
<p>删除window<br>Ctrl+b &amp;</p>
<p>下一个window<br>Ctrl+b n</p>
<p>上一个window<br>Ctrl+b p</p>
<p>重命名window<br>Ctrl+b ,</p>
<p>在多个window里搜索关键字<br>Ctrl+b f</p>
<p>在相邻的两个window里切换<br>Ctrl+b l</p>
<p>—-</p>
<p>pane在window里，可以有N个pane，并且pane可以在不同的window里移动、合并、拆分<br>创建pane<br>横切split pane horizontal<br>Ctrl+b ” (问号的上面，shift+’)</p>
<p>竖切split pane vertical<br>Ctrl+b % （shift+5）</p>
<p>按顺序在pane之间移动<br>Ctrl+b o</p>
<p>上下左右选择pane<br>Ctrl+b 方向键上下左右</p>
<p>调整pane的大小<br>Ctrl+b :resize-pane -U #向上<br>Ctrl+b :resize-pane -D #向下<br>Ctrl+b :resize-pane -L #向左<br>Ctrl+b :resize-pane -R #向右<br>在上下左右的调整里，最后的参数可以加数字 用以控制移动的大小，例如：<br>Ctrl+b :resize-pane -D 50</p>
<p>在同一个window里左右移动pane<br>Ctrl+b { （往左边，往上面）<br>Ctrl+b } （往右边，往下面）</p>
<p>删除pane<br>Ctrl+b x</p>
<p>更换pane排版<br>Ctrl+b “空格”</p>
<p>移动pane至window<br>Ctrl+b !</p>
<p>移动pane合并至某个window<br>Ctrl+b :join-pane -t $window_name</p>
<p>显示pane编号<br>Ctrl+b q</p>
<p>按顺序移动pane位置<br>Ctrl+b Ctrl+o</p>
<p>—-<br>其他：</p>
<p>复制模式<br>Ctrl+b [<br>空格标记复制开始，回车结束复制。</p>
<p>粘贴最后一个缓冲区内容<br>Ctrl+b ]</p>
<p>选择性粘贴缓冲区<br>Ctrl+b =</p>
<p>列出缓冲区目标<br>Ctrl+b :list-buffer</p>
<p>查看缓冲区内容<br>Ctrl+b :show-buffer</p>
<p>vi模式<br>Ctrl+b :set mode-keys vi</p>
<p>显示时间<br>Ctrl+b t</p>
<p>快捷键帮助<br>Ctrl+b ? (Ctrl+b :list-keys)</p>
<p>tmux内置命令帮助<br>Ctrl+b :list-commands</p>
<h3 id="tmux如何查看历史输出"><a href="#tmux如何查看历史输出" class="headerlink" title="tmux如何查看历史输出"></a>tmux如何查看历史输出</h3><p>在tmux里面，因为每个窗口(tmux window)的历史内容已经被tmux接管了，所以原来console/terminal提供的Shift+PgUp/PgDn所显示的内容并不是当前窗口的历史内容，那么应该怎么办呢?</p>
<p>改用C-b [进入copy mode，然后就可以用PgUp/PgDn/光标来浏览历史输出了，按q退出。C-b PgUp也可以直接进入coy mode. 参见:How do I scroll in tmux? - Super User</p>
<p>copy mode其实比较类似于vi/emacs里面一个只读buffer，可以移动光标，可以搜索，用C-SPC开始选择，选择完后用M-w拷贝(拷贝后自动退 出copy mode)，然后可以C-b ]粘贴(可在其它窗口粘贴), C-b =可以从剪贴板历史中选择。</p>
<p>gnu screen里面呢<br>gnu screen进入copy mode的方式跟tmux类似(C-a [)，但进入后它是vi style keybindings。</p>
<p>对于拷贝文字，第一次空格设置开始标记，然后用hjklw之类移动光标，第二次空格完成拷贝。粘贴也是用C-a ]</p>
<h3 id="update-alternatives命令详解"><a href="#update-alternatives命令详解" class="headerlink" title="update-alternatives命令详解"></a>update-alternatives命令详解</h3><p>说明：<br>如我系统已安装有java 1.6，还想要安装java 1.7，但我不想卸载java 1.6。就可以通过update-alternatives –config在多个java版本间进程切换。update-alternatives是用于在多个同类型命令中进行切换的一个脚本，在debian中可以通过apt-get install dpkg来进行安装。</p>
<p>在说明update-alternatives的详细用法之前，先让我们看看系统中已有的例子。打开终端，执行下面的命令：</p>
<h1 id="ls-l-usr-bin-java"><a href="#ls-l-usr-bin-java" class="headerlink" title="ls -l /usr/bin/java"></a>ls -l /usr/bin/java</h1><p>lrwxrwxrwx 1 root root 22 2011-03-12 15:20 /usr/bin/java -&gt; /etc/alternatives/java</p>
<h1 id="ls-l-etc-alternatives-java"><a href="#ls-l-etc-alternatives-java" class="headerlink" title="ls -l /etc/alternatives/java"></a>ls -l /etc/alternatives/java</h1><p>lrwxrwxrwx 1 root root 40 2011-03-12 15:20 /etc/alternatives/java -&gt; /usr/lib/jvm/java-6-openjdk/jre/bin/java<br>java这个可执行命令实际是一个链接，指向了/etc/alternatives/java。而这个也是一个链接，指向了/usr/lib/jvm/java-6-openjdk/jre/bin/java，这才是最终的可执行文件。之所以建立这样两个链接，是为了方便脚本程序的编写和系统的管理。</p>
<p>语法：<br>暂空！！！</p>
<p>实例：</p>
<ol>
<li>display参数列出一个命令的所有可选命令</li>
</ol>
<h1 id="update-alternatives-–display-java"><a href="#update-alternatives-–display-java" class="headerlink" title="update-alternatives –display java"></a>update-alternatives –display java</h1><ol start="2">
<li>config参数用于给某个命令选择一个link值，相当于在可用值之中进行切换吧。</li>
</ol>
<h1 id="update-alternatives-–config-java-有-3-个候选项可用于替换-java-提供-usr-bin-java"><a href="#update-alternatives-–config-java-有-3-个候选项可用于替换-java-提供-usr-bin-java" class="headerlink" title="update-alternatives –config java  //有 3 个候选项可用于替换 java (提供 /usr/bin/java)"></a>update-alternatives –config java  //有 3 个候选项可用于替换 java (提供 /usr/bin/java)</h1><h2 id="选择-路径-优先级-状态"><a href="#选择-路径-优先级-状态" class="headerlink" title=" 选择       路径                                       优先级  状态  "></a> 选择       路径                                       优先级  状态  </h2><p>  0            /usr/lib/jvm/java-6-openjdk/jre/bin/java      1061      自动模式  </p>
<ul>
<li>1            /home/wuekzhu/download/jdk1.6.0_23/bin/java   1         手动模式<br>2            /usr/lib/jvm/java-6-openjdk/jre/bin/java      1061      手动模式  </li>
</ul>
<ol start="3">
<li>install参数用于添加一个命令的link值，相当于添加一个可用值，其中slave非常有用。</li>
</ol>
<h1 id="update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100"><a href="#update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100" class="headerlink" title="update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100"></a>update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100</h1><h1 id="update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100-–slave-usr-bin-javac-javac-usr-local-jre1-6-0-20-bin-javac"><a href="#update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100-–slave-usr-bin-javac-javac-usr-local-jre1-6-0-20-bin-javac" class="headerlink" title="update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100 –slave /usr/bin/javac javac /usr/local/jre1.6.0_20/bin/javac"></a>update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100 –slave /usr/bin/javac javac /usr/local/jre1.6.0_20/bin/javac</h1><ol start="4">
<li>remove参数用于删除一个命令的link值，其附带的slave也将一起删除。</li>
</ol>
<h1 id="update-alternatives-–remove-java-usr-local-jre1-6-0-20-bin-java"><a href="#update-alternatives-–remove-java-usr-local-jre1-6-0-20-bin-java" class="headerlink" title="update-alternatives –remove java /usr/local/jre1.6.0_20/bin/java"></a>update-alternatives –remove java /usr/local/jre1.6.0_20/bin/java</h1><p>当然如果想让java能使用，还是得把java按照如下添加到环境变量去。</p>
<h1 id="vim-etc-profile-在最后添加以下内容"><a href="#vim-etc-profile-在最后添加以下内容" class="headerlink" title="vim /etc/profile //在最后添加以下内容"></a>vim /etc/profile //在最后添加以下内容</h1><p>JAVA_HOME=/usr/local/jdk1.5.0_22<br>CLASSPATH=.:$JAVA_HOME/lib/tools.jar<br>PATH=$PATH: $JAVA_HOME/bin<br>export PATH=$PATH:$JAVA_HOME/bin<br>export JAVA_HOME CLASSPATH PATH<br>如果想通过update-alternatives在多个版本的java间切换，只需简单地用update-alternatives –config java，选择我们想要的java版本即可！</p>
<h2 id="perl模块安装"><a href="#perl模块安装" class="headerlink" title="perl模块安装"></a>perl模块安装</h2><p>转自：<a href="http://www.mike.org.cn/blog/index.php?load=read&amp;id=643" target="_blank" rel="noopener">http://www.mike.org.cn/blog/index.php?load=read&amp;id=643</a></p>
<p>Perl 到了第五版增加了模块的概念，用来提供面向对象编程的能力。这是 Perl 语言发展史上的一个里程碑。此后，广大自由软件爱好者开发了大量功能强大、构思精巧的 Perl 模块，极大地扩展了 Perl 语言的功能。CPAN(Comprehensive Perl Archive Network)是Perl模块最大的集散地，包含了现今公布的几乎所有的perl模块。</p>
<p>安装方法</p>
<p>我在这里介绍一下各种平台下 perl 模块的安装方法。以安装Net-Server模块为例。</p>
<p>一 Linux/Unix下安装Perl模块有两种方法：手工安装和自动安装。</p>
<p>第一种方法是从CPAN上下载您需要的模块，手工编译、安装。第二种方法是使用CPAN模块自动完成下载、编译、安装的全过程。</p>
<p>A、手工安装的步骤：</p>
<p>　　从 CPAN(<a href="http://search.cpan.org/)下载了Net-Server模块0.97版的压缩文件Net-Server-0.97.tar.gz，假设放在/usr/local/src/下。" target="_blank" rel="noopener">http://search.cpan.org/)下载了Net-Server模块0.97版的压缩文件Net-Server-0.97.tar.gz，假设放在/usr/local/src/下。</a></p>
<p>　　cd /usr/local/src</p>
<p>　　解压缩这个文件,这时会新建一个Net-Server-0.97的目录。</p>
<p>　　tar xvzf Net-Server-0.97.tar.gz</p>
<p>　　换到解压后的目录：</p>
<p>　　cd Net-Server-0.97</p>
<p>　　生成 makefile：</p>
<p>　　perl Makefile.PL</p>
<p>　　生成模块：make</p>
<p>　　测试模块(这步可有可无)：</p>
<p>　　make test<br>　　<br>　　如果测试结果报告“all test ok”，您就可以放心地安装编译好的模块了。</p>
<p>　　安装模块前，先要确保您对 perl5 安装目录有可写权限(通常以 su 命令获得)，执行：</p>
<p>　　make install</p>
<p>　　现在，试试 DBI 模块吧。如果下面的命令没有给出任何输出，那就没问题。</p>
<p>　　$&gt;perl -MNet::Server -e1</p>
<p>　　上述步骤适合于 Linux/Unix下绝大多数的Perl模块。可能还有少数模块的安装方法略有差别，所以最好先看看安装目录里的 README 或 INSTALL。</p>
<p>有的时候如果是build.pl的需要以下安装步骤：（需要Module::Build模块支持）</p>
<p>  perl Build.PL<br> ./Build<br> ./Build test<br> ./Build install </p>
<p>B、使用CPAN模块自动安装方法一：</p>
<p>　　安装前需要先联上网，并且您需要取得root权限。</p>
<p>　　perl -MCPAN -e shell</p>
<p>　　初次运行CPAN时需要做一些设置，如果您的机器是直接与因特网相联(拨号上网、专线，etc.)，那么一路回车就行了，只需要在最后一步选一个离您最近的 CPAN 镜像站点。例如我选的是位于国内的<a href="http://www.cnblogs.com/itech/admin/ftp://www.perl87.cn/CPAN/" target="_blank" rel="noopener">http://www.cnblogs.com/itech/admin/ftp://www.perl87.cn/CPAN/</a> 。否则，如果您的机器位于防火墙之后，还需要设置ftp代理或http代理。下面是常用 cpan 命令。</p>
<p>　　获得帮助<br>　　cpan&gt;help</p>
<p>　　列出CPAN上所有模块的列表<br>　　cpan&gt;m</p>
<p>　　安装模块，自动完成Net::Server模块从下载到安装的全过程。<br>　　cpan&gt;install Net::Server</p>
<p>　　退出<br>　　cpan&gt;quit</p>
<p>C、使用CPAN模块自动安装方法二：</p>
<p>　　cpan -i 模块名</p>
<p>　　例如：cpan -i Net::Server</p>
<p>二 windows上perl模块安装　</p>
<p>A 手动（跟Linux类似） [解压后 perl makefile.pl nmake/dmake nmake/dmake install]</p>
<p>nmake需要cd C:\Program Files\Microsoft Visual Studio X\VC\bin and execute vcvars32.bat;然后执行nmake；</p>
<p>dmake 貌似是cpan环境配置好就有了在C:\Perl\site\bin下。<br>B Cpan （安装前需要对cpan配置，cpan需要安装其他的模块dmake和MinGw gcc compiler） （跟Linux类似）</p>
<p>C 如果使用ActivePerl，可以使用PPM来安装，使用PPM GUI或PPM Commandline，PPM commandline实例如下：</p>
<p>a) add correct repositories..</p>
<p>c:\perl\bin\ppm repo add <a href="http://theoryx5.uwinnipeg.ca/ppms/package.lst" target="_blank" rel="noopener">http://theoryx5.uwinnipeg.ca/ppms/package.lst</a></p>
<p>c:\perl\bin\ppm repo add <a href="http://www.roth.net/perl/packages/" target="_blank" rel="noopener">http://www.roth.net/perl/packages/</a></p>
<p> b) add the packages</p>
<p>c:\perl\bin\ppm install Carp-Assert</p>
<p>c:\perl\bin\ppm install Log-Log4perl</p>
<p>c:\perl\bin\ppm install YAML-Syck</p>
<p>三 几个主要的CPAN站点有：</p>
<p>　　国内：</p>
<p>　　最新更新请查阅 <a href="http://cpan.org/SITES.html" target="_blank" rel="noopener">http://cpan.org/SITES.html</a></p>
<p>　　<a href="http://www.perl87.cn/CPAN/" target="_blank" rel="noopener">http://www.perl87.cn/CPAN/</a>  网页镜像<br>　　<a href="http://www.cnblogs.com/itech/admin/ftp://www.perl87.cn/CPAN/" target="_blank" rel="noopener">http://www.cnblogs.com/itech/admin/ftp://www.perl87.cn/CPAN/</a>   模块镜像<br>　　<br>　　国外：<a href="http://www.cpan.org/" target="_blank" rel="noopener">http://www.cpan.org/</a></p>
<p>四 使用cpan和ppm安装时要注意模块名字的大小写</p>
<p>完！</p>
<h4 id="INC-错误时"><a href="#INC-错误时" class="headerlink" title="@INC 错误时"></a>@INC 错误时</h4><p>cpan &gt; install Config::IniFiles</p>
<h2 id="autojump"><a href="#autojump" class="headerlink" title="autojump"></a>autojump</h2><p>如果你找不到适合你的版本的包，你可以从GitHub上下载源码包来编译。(<strong>不要使用 apt yum 等 安装。建议只使用源代码编译安装</strong>)<br>autojump的基本用法</p>
<p>autojump的工作方式很简单：它会在你每次启动命令时记录你当前位置，并把它添加进它自身的数据库中。这样，某些目录比其它一些目录添加的次数多，这些目录一般就代表你最重要的目录，而它们的“权重”也会增大。</p>
<p>现在不管你在哪个目录，你都可以使用下面的语法来直接跳转到这些目录：<br>Shell<br>autojump [目录的名字或名字的一部分]<br>1</p>
<p>autojump [目录的名字或名字的一部分]</p>
<p>注意，你不需要输入完整的名称，因为autojump会检索它的数据库，并返回最可能的结果。</p>
<p>例如，假定我们正在下面的目录结构中工作。</p>
<p>rger140043jbr5bwr2n1znj87c</p>
<p>那么下面的命令将直接让你跳到/root/home/doc下，不管你当前位置在哪里。<br>Shell<br>$ autojump do<br>1</p>
<p>$ autojump do</p>
<p>如果你也很讨厌打字，那么我推荐你为autojump起个别名，或者使用默认的别名。<br>Shell<br>$ j [目录的名字或名字的一部分]<br>1</p>
<p>$ j [目录的名字或名字的一部分]</p>
<p>另外一个引人注目的功能是，autojump支持zsh和自动补完。如果你不确认哪里是不是你要跳转的地方，敲击TAB键就会列出完整路径。</p>
<p>还是同样的例子，输入：<br>Shell<br>$ autojump d<br>1</p>
<p>$ autojump d</p>
<p>然后敲击tab键，将会返回/root/home/doc或者/root/home/ddl。</p>
<p>最后，对于高级用户，你可以访问目录数据库，并修改它的内容。可以使用下面的命令来手动添加一个目录：<br>Shell<br>$ autojump -a [目录]<br>1</p>
<p>$ autojump -a [目录]</p>
<p>如果你突然想要把当前目录变成你的最爱和使用最频繁的文件夹，你可以在该目录通过命令的参数 i 来手工增加它的权重<br>Shell<br>$ autojump -i [权重]<br>1</p>
<p>$ autojump -i [权重]</p>
<p>这将使得该目录更可能被选择跳转。相反的例子是在该目录使用参数 d 来减少权重：<br>Shell<br>$ autojump -d [权重]<br>1</p>
<p>$ autojump -d [权重]</p>
<p>要跟踪所有这些改变，输入：<br>Shell<br>$ autojump -s<br>1</p>
<p>$ autojump -s</p>
<p>这会显示数据库中的统计数据。而以下：<br>Shell<br>$ autojump –purge<br>1</p>
<p>$ autojump –purge</p>
<p>命令将会把不再存在的目录从数据库中移除。</p>
<p>简言之，autojump将会受到所有命令行高级用户的欢迎。不管你是在ssh进一台服务器，还是仅仅想要追随复古潮流，敲更少的键来减少导航时间总是件好事。如果你真的热衷于此类工具，你也肯定也想看看Fasd，它应该会给你一个惊喜——我们下次再介绍它。</p>
<p>你觉得autojump怎么样？你会经常用它么？发表一下你的评论吧</p>
<h2 id="putty"><a href="#putty" class="headerlink" title="putty"></a>putty</h2><p>putty 登陆linux，命令行下无法用”home”、“end” 键<br>putty -&gt; Connection -&gt; Data -&gt; Terminal type string 改成 Linux</p>
<h3 id="在putty中打开vi时复制文字到windows"><a href="#在putty中打开vi时复制文字到windows" class="headerlink" title="在putty中打开vi时复制文字到windows"></a>在putty中打开vi时复制文字到windows</h3><p>复制的时候，如果直接用鼠标复制的时候，是又vim处理的，需要按住shift才是xterm处理的，<br>后测试了下，果然可以，后来用vnc连server发现在vim中也是同样适用的，高兴</p>
<h2 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h2><p>[root@www ~]# sed [-nefr] [动作]<br>选项与参数：<br>-n ：使用安静(silent)模式。在一般 sed 的用法中，所有来自 STDIN 的数据一般都会被列出到终端上。但如果加上 -n 参数后，则只有经过sed 特殊处理的那一行(或者动作)才会被列出来。<br>-e ：直接在命令列模式上进行 sed 的动作编辑；<br>-f ：直接将 sed 的动作写在一个文件内， -f filename 则可以运行 filename 内的 sed 动作；<br>-r ：sed 的动作支持的是延伸型正规表示法的语法。(默认是基础正规表示法语法)<br>-i ：直接修改读取的文件内容，而不是输出到终端。</p>
<p>动作说明： [n1[,n2]]function<br>n1, n2 ：不见得会存在，一般代表『选择进行动作的行数』，举例来说，如果我的动作是需要在 10 到 20 行之间进行的，则『 10,20[动作行为] 』</p>
<p>function：<br>a ：新增， a 的后面可以接字串，而这些字串会在新的一行出现(目前的下一行)～<br>c ：取代， c 的后面可以接字串，这些字串可以取代 n1,n2 之间的行！<br>d ：删除，因为是删除啊，所以 d 后面通常不接任何咚咚；<br>i ：插入， i 的后面可以接字串，而这些字串会在新的一行出现(目前的上一行)；<br>p ：列印，亦即将某个选择的数据印出。通常 p 会与参数 sed -n 一起运行～<br>s ：取代，可以直接进行取代的工作哩！通常这个 s 的动作可以搭配正规表示法！例如 1,20s/old/new/g 就是啦！</p>
<p>复制代码</p>
<p>以行为单位的新增/删除</p>
<p>将 /etc/passwd 的内容列出并且列印行号，同时，请将第 2~5 行删除！</p>
<p>[root@www ~]# nl /etc/passwd | sed ‘2,5d’<br>1 root:x:0:0:root:/root:/bin/bash<br>6 sync:x:5:0:sync:/sbin:/bin/sync<br>7 shutdown:x:6:0:shutdown:/sbin:/sbin/shutdown<br>…..(后面省略)…..</p>
<p>sed 的动作为 ‘2,5d’ ，那个 d 就是删除！因为 2-5 行给他删除了，所以显示的数据就没有 2-5 行罗～ 另外，注意一下，原本应该是要下达 sed -e 才对，没有 -e 也行啦！同时也要注意的是， sed 后面接的动作，请务必以 ‘’ 两个单引号括住喔！</p>
<p>只要删除第 2 行</p>
<p>nl /etc/passwd | sed ‘2d’ </p>
<h2 id="ripgrep"><a href="#ripgrep" class="headerlink" title="ripgrep"></a>ripgrep</h2><p><a href="https://github.com/BurntSushi/ripgrep" target="_blank" rel="noopener">https://github.com/BurntSushi/ripgrep</a></p>
<p>这个就是 rg 查找 命令了。</p>
<h2 id="查找-lib"><a href="#查找-lib" class="headerlink" title="查找 lib"></a>查找 lib</h2><p>locate libgcc<br>或者<br>dpkg -l | grep -i lua</p>
<p>当安装了相应的 lib 文件之后（如 liblua5.2-dev） 之后，无法 locate lib<br>到相应的库，则可以使用 ldconfig( 或者 updatedb 吧) 对动态连接库的 list 进行更新。</p>
<h2 id="configure-lib-not-found"><a href="#configure-lib-not-found" class="headerlink" title="configure lib not found"></a>configure lib not found</h2><p>PKG_CONFIG_PATH<br>PKG_CONFIG_LIBDIR<br>上面这两个环境变量，一般是使用在 configure 的，用于 package 的查找。当提示某些<br>pkg 或者 pkg 的 lib 找不着时，可以适当修改一下</p>
<p>apt install libxxx-dev<br>ldconfig<br>PKG_CONFIG_LIBDIR=$PKG_CONFIG_LIBDIR:/usr/lib/pkgconfig:/usr/lib/x86_64-linux-gnu/pkgconfig</p>
<h2 id="安装-build-dep"><a href="#安装-build-dep" class="headerlink" title="安装 build-dep"></a>安装 build-dep</h2><p>当使用<br>sudo apt-get build-dep 【软件安装包】<br>安装软件时出现如下错误</p>
<p>E: You must put some ‘source’ URIs in your sources.list</p>
<p>在搜索中找到 ‘Software &amp; Updates’, 然后在 “Ubuntu Software” 菜单中将 “Source code”框勾选上。如下图位置：<br>这是用来添加一些 ‘deb-src’ 在 ‘/etc/apt/sources.list’文件中，然后你就可以运行之前的命令安装软件了：</p>
<p>sudo apt-get build-dep 【软件安装包】</p>
<h3 id="add-apt-repository"><a href="#add-apt-repository" class="headerlink" title="add-apt-repository"></a>add-apt-repository</h3><p>添加 ppa 时，可以使用命令行<br>sudo add-apt-repository ‘URL’<br>删除 ppa，通过修改源文件。<br> sudo gedit  /etc/apt/sources.list<br> cd /etc/apt/sources.list.d &amp;&amp; sudo gedit ‘xxxxx’<br>或者<br>sudo add-apt-repository –remove ppa:whatever/ppa</p>
<p>添加或者删除了 ppa 之后，还需要 sudo apt-get update</p>
<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><p>1、建用户：</p>
<p>adduser phpq                            //新建phpq用户<br>passwd phpq                            //给phpq用户设置密码</p>
<p>2、建工作组<br>groupadd test                          //新建test工作组</p>
<p>3、新建用户同时增加工作组<br>useradd -g test phpq               //新建phpq用户并增加到test工作组</p>
<p>注：：-g 所属组 -d 家目录 -s 所用的SHELL</p>
<p>4、给已有的用户增加工作组</p>
<p>usermod -G groupname username<br>usermod -aG groupname username</p>
<p>或者：gpasswd -a user group</p>
<p>5、临时关闭：在/etc/shadow文件中属于该用户的行的第二个字段（密码）前面加上<em>就可以了。想恢复该用户，去掉</em>即可。</p>
<p>或者使用如下命令关闭用户账号：</p>
<p>passwd peter –l</p>
<p>重新释放：</p>
<p>passwd peter –u</p>
<p>6、永久性删除用户账号</p>
<p>userdel peter</p>
<p>groupdel peter</p>
<p>usermod –G peter peter   （强制删除该用户的主目录和主目录下的所有文件和子目录）</p>
<p>7、从组中删除用户</p>
<p>编辑/etc/group 找到GROUP1那一行，删除 A 或者用命令 gpasswd -d A GROUP</p>
<p>8、显示用户信息</p>
<p>id user<br>cat /etc/passwd</p>
<p>补充:查看用户和用户组的方法</p>
<p>用户列表文件：/etc/passwd<br>用户组列表文件：/etc/group</p>
<p>查看系统中有哪些用户：cut -d : -f 1 /etc/passwd<br>查看可以登录系统的用户：cat /etc/passwd | grep -v /sbin/nologin | cut -d : -f 1<br>查看用户操作：w命令(需要root权限)<br>查看某一用户：w 用户名<br>查看登录用户：who<br>查看用户登录历史记录：last</p>
<h2 id="rsync命令"><a href="#rsync命令" class="headerlink" title="rsync命令"></a>rsync命令</h2><p> rsync命令是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件。rsync使用所谓的“rsync算法”来使本地和远程两个主机之间的文件达到同步，这个算法只传送两个文件的不同部分，而不是每次都整份传送，因此速度相当快。 rsync是一个功能非常强大的工具，其命令也有很多功能特色选项，我们下面就对它的选项一一进行分析说明。<br>语法<br></p><figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-tag">SRC</span> <span class="selector-tag">DEST</span></span><br><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-tag">SRC</span> <span class="selector-attr">[USER@]</span><span class="selector-tag">host</span><span class="selector-pseudo">:DEST</span></span><br><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-attr">[USER@]</span><span class="selector-tag">HOST</span><span class="selector-pseudo">:SRC</span> <span class="selector-tag">DEST</span></span><br><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-attr">[USER@]</span><span class="selector-tag">HOST</span><span class="selector-pseudo">::SRC</span> <span class="selector-tag">DEST</span></span><br><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-tag">SRC</span> <span class="selector-attr">[USER@]</span><span class="selector-tag">HOST</span><span class="selector-pseudo">::DEST</span></span><br><span class="line"><span class="selector-tag">rsync</span> <span class="selector-attr">[OPTION]</span>... <span class="selector-tag">rsync</span>:<span class="comment">//[USER@]HOST[:PORT]/SRC [DEST]</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<h2 id="查找大于-100M-的文件"><a href="#查找大于-100M-的文件" class="headerlink" title="查找大于 100M 的文件"></a>查找大于 100M 的文件</h2><p>fdu -sh [dirname|filename]<br>当前目录的大小：<br>　　du -sh .<br>　　当前目录下个文件或目录的大小：<br>　　du -sh <em><br>　　显示前10个占用空间最大的文件或目录：<br>　　du -s </em> | sort -nr | headind -type f -size +100M</p>
<h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><p>ubuntu 升级系统<br></p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt upgrade</span><br><span class="line">sudo apt dist-upgrade</span><br></pre></td></tr></tbody></table></figure><p></p>
<p>设置自动挂载，重启虚拟机系统共享仍在。<br>可以在/etc/fstab中添加一项<br>BaiduShare /mnt/share vboxsf rw,gid=110,uid=1100,auto 0 0</p>
<h2 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h2><p>一、VirtualBox的提供了四种网络接入模式，它们分别是：<br>1、NAT 网络地址转换模式(NAT,Network Address Translation)<br>2、Bridged Adapter 桥接模式<br>3、Internal 内部网络模式<br>4、Host-only Adapter 主机模式 </p>
<table>
<thead>
<tr>
<th style="text-align:left">Dir</th>
<th style="text-align:left">NAT</th>
<th>Bridged</th>
<th>Internal</th>
<th>Host-only</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Guest to Host</td>
<td style="text-align:left">yes</td>
<td>yes</td>
<td>no</td>
<td>config</td>
</tr>
<tr>
<td style="text-align:left">Host to Guest</td>
<td style="text-align:left">no</td>
<td>yes</td>
<td>no</td>
<td>config</td>
</tr>
<tr>
<td style="text-align:left">Guest to Guest</td>
<td style="text-align:left">no</td>
<td>yes</td>
<td>null</td>
<td>yes</td>
</tr>
</tbody>
</table>
<h3 id="压缩-guest-os-占用的大小"><a href="#压缩-guest-os-占用的大小" class="headerlink" title="压缩 guest os 占用的大小"></a>压缩 guest os 占用的大小</h3><p>如果guest os 是windows:<br>1、先在guest os上运行磁盘碎片管理器，将各个磁盘的磁盘碎片减少；<br>2、下载sdelete（<a href="http://technet.microsoft.com/en-us/sysinternals/bb897443.aspx）" target="_blank" rel="noopener">http://technet.microsoft.com/en-us/sysinternals/bb897443.aspx）</a>;<br>3、运行sdelete -c -z ；<br>4、关闭guest os 和 VirtualBox<br>5、在host os上运行VBoxManage modifyhd –compact yourImage.vdi</p>
<p>如果 guest os 为 linux 时</p>
<ol>
<li>进入su</li>
<li>$ dd if=/dev/zero of=test.file (会填满整个虚拟磁盘，对 host 的磁盘影响不大)</li>
<li>$ rm test.file</li>
<li>关闭掉 guest os 以及 VBox</li>
<li>在host os上 运行下列命令<figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage modifyhd <span class="comment">--compact yourImage.vdi</span></span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<p>这样在guest上看到占用的空间就和host上看到的空间就一样了。</p>
<h2 id="home"><a href="#home" class="headerlink" title="home"></a>home</h2><p>在 linux 下面，有一堆杂七杂八的东西。 .cache .config .dbus .ibus .Xauthorxxx 如果你的电脑出现一些奇怪的现象：输入无法输入，桌面无法显示，图标异常，字体看不见等等问题。可以尝试将这些杂七杂八的东西删掉。</p>
<h2 id="超级终端"><a href="#超级终端" class="headerlink" title="超级终端"></a>超级终端</h2><h3 id="颜色特效控制："><a href="#颜色特效控制：" class="headerlink" title="颜色特效控制："></a>颜色特效控制：</h3><p>printf(“\033[1;33m Hello World. \033[0m \n”);<br>颜色如下:<br>none         = “\033[0m”<br>black        = “\033[0;30m”<br>dark_gray    = “\033[1;30m”<br>blue         = “\033[0;34m”<br>light_blue   = “\033[1;34m”<br>green        = “\033[0;32m”<br>light_green -= “\033[1;32m”<br>cyan         = “\033[0;36m”<br>light_cyan   = “\033[1;36m”<br>red          = “\033[0;31m”<br>light_red    = “\033[1;31m”<br>purple       = “\033[0;35m”<br>light_purple = “\033[1;35m”<br>brown        = “\033[0;33m”<br>yellow       = “\033[1;33m”<br>light_gray   = “\033[0;37m”<br>white        = “\033[1;37m”</p>
<p>字背景颜色范围: 40–49                   字颜色: 30–39<br>            40: 黑                          30: 黑<br>        41:红                          31: 红<br>        42:绿                          32: 绿<br>        43:黄                          33: 黄<br>        44:蓝                          34: 蓝<br>        45:紫                          35: 紫<br>        46:深绿                        36: 深绿<br>        47:白色                        37: 白色</p>
<p>输出特效格式控制：</p>
<p>\033[0m  关闭所有属性<br>\033[1m   设置高亮度<br>\03[4m   下划线<br>\033[5m   闪烁<br>\033[7m   反显<br>\033[8m   消隐<br>\033[30m   –   \033[37m   设置前景色<br>\033[40m   –   \033[47m   设置背景色</p>
<p>光标位置等的格式控制：</p>
<p>\033[nA  光标上移n行<br>\03[nB   光标下移n行<br>\033[nC   光标右移n行<br>\033[nD   光标左移n行<br>\033[y;xH设置光标位置<br>\033[2J   清屏<br>\033[K   清除从光标到行尾的内容<br>\033[s   保存光标位置<br>\033[u   恢复光标位置<br>\033[?25l   隐藏光标<br>\33[?25h   显示光标</p>
<h2 id="lsusb-lspci"><a href="#lsusb-lspci" class="headerlink" title="lsusb lspci"></a>lsusb lspci</h2><p>可以查看对应的接口信息。 <code>lspci | grep network</code> 就可以查看网卡的信息了。</p>
<h2 id="linux创建指定大小的文件"><a href="#linux创建指定大小的文件" class="headerlink" title="linux创建指定大小的文件"></a>linux创建指定大小的文件</h2><p>一、生成文件大小和实际占空间大小一样的文件</p>
<p>dd if=/dev/zero of=50M.file bs=1M count=50</p>
<p>dd if=/dev/zero of=20G.file bs=1G count=20</p>
<p>bs=1M表示每一次读写1M数据，count=50表示读写 50次，这样就指定了生成文件的大小为50M。bs参数还可以进一步细分为ibs和obs两种，为读操作与写操作分别指定不同的Buffer大小。</p>
<p>二、生成文件大小固定，但实际不占空间命令</p>
<p>dd if=/dev/zero of=1G.img bs=1M seek=1000 count=0</p>
<p>这里用了一个新的命令seek，表示略过1000个Block不写（这里Block按照bs的定义是1M），count=0表示写入0个Block。用ls(查看文件大小)命令看新生成的文件，大小可以看出是1000M。但是再用du（查看文件占用空间）一看，实际占用硬盘大小只有0M。</p>
<h2 id="修改用户名"><a href="#修改用户名" class="headerlink" title="修改用户名"></a>修改用户名</h2><p> 以root身份登录（反正就不要登录待改名的用户），然后使用下列命令进行修改</p>
<p>格式：</p>
<p>usermod -l NewUser -d /home/NewUser -m OldUser</p>
<p>usermod -l alao -d /home/alao -m tom</p>
<p>-l 修改用户名</p>
<p>-d 修改登录后使用的路径</p>
<p>-m 修改登录名称的同时将目录名称一同修改<br>2</p>
<p>修改组名称：</p>
<p>继上面操作后，继续执行下列命令</p>
<p>格式：</p>
<p>groupmod -n NewUser OldName</p>
<p>groupmod    -n   alao   tom</p>
<p>-n 修改组的名称</p>
<h2 id="出现-zombie-僵尸-进程时"><a href="#出现-zombie-僵尸-进程时" class="headerlink" title="出现 zombie (僵尸)进程时"></a>出现 zombie (僵尸)进程时</h2><p>1：top命令 查看进程：<br>2：查看具体是哪个进程：<br></p><figure class="highlight dts"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">linux:</span>~ <span class="meta"># ps -A -o stat,ppid,pid,cmd |grep -e <span class="string">"^[Zz]"</span></span></span><br><span class="line">Z     <span class="number">3064</span>  <span class="number">5118</span> [socket-memory-e] <span class="params">&lt;defunct&gt;</span></span><br></pre></td></tr></tbody></table></figure><p></p>
<p> 可以看出僵尸进程的进程id为3064</p>
<p>3：查看僵尸进程是什么应用：<br>linux:~ #lsof  -p 3064</p>
<p>4：kill僵尸进程：<br>kill  -9  3064</p>
<p>注：从第3步可以看出僵尸进程是什么应用，请依据实际情况确认此进程是否能够kill掉，及明确kill之后需要重启的应用等后续处理；</p>

      
    </div>

    

    
    
    

    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Jiaobuzuji</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://www.jiaobuzuji.com/blogs/linux-note/" title="linux-note">http://www.jiaobuzuji.com/blogs/linux-note/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/linux/" rel="tag"># linux</a>
          
            <a href="/tags/centos/" rel="tag"># centos</a>
          
            <a href="/tags/ubuntu/" rel="tag"># ubuntu</a>
          
            <a href="/tags/shell/" rel="tag"># shell</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blogs/xilinx-vivado/" rel="next" title="xilinx-vivado">
                <i class="fa fa-chevron-left"></i> xilinx-vivado
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blogs/nvdla/" rel="prev" title="nvdla 研究">
                nvdla 研究 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jiaobuzuji</p>
              <p class="site-description motion-element" itemprop="description">工作与生活分不清楚的 ASIC 数字前端程序猿</p>
          </div>

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/jiaobuzuji" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:jiaobuzuji@163.com" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          
            <div class="cc-license motion-element" itemprop="license">
              <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow">
                <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons">
              </a>
            </div>
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Perl-相关"><span class="nav-number">2.</span> <span class="nav-text">Perl 相关</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装到-local"><span class="nav-number">3.</span> <span class="nav-text">安装到 local</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于login-interactive-no-interactive-shell和profile-bash-profile-bashrc"><span class="nav-number">4.</span> <span class="nav-text">关于login/interactive/no-interactive shell和profile/bash_profile/bashrc</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#umask"><span class="nav-number">5.</span> <span class="nav-text">umask</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ssh"><span class="nav-number">6.</span> <span class="nav-text">ssh</span></a></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#Site-wide-defaults-for-various-options"><span class="nav-number"></span> <span class="nav-text">Site-wide defaults for various options</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Site-wide-defaults-for-various-options-1"><span class="nav-number"></span> <span class="nav-text">Site-wide defaults for various options</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#This-is-ssh-server-systemwide-configuration-file"><span class="nav-number"></span> <span class="nav-text">This is ssh server systemwide configuration file.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#restorecon-R-v-home-root用户为-root"><span class="nav-number"></span> <span class="nav-text">restorecon -R -v /home #root用户为/root</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ssh-config"><span class="nav-number">1.</span> <span class="nav-text">~/.ssh/config</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VNC"><span class="nav-number">2.</span> <span class="nav-text">VNC</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#The-VNCSERVERS-variable-is-a-list-of-display-user-pairs"><span class="nav-number"></span> <span class="nav-text">The VNCSERVERS variable is a list of display:user pairs.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Uncomment-the-lines-below-to-start-a-VNC-server-on-display-2"><span class="nav-number"></span> <span class="nav-text">Uncomment the lines below to start a VNC server on display :2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#as-my-‘myusername’-adjust-this-to-your-own-You-will-also"><span class="nav-number"></span> <span class="nav-text">as my ‘myusername’ (adjust this to your own).  You will also</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#need-to-set-a-VNC-password-run-‘man-vncpasswd’-to-see-how"><span class="nav-number"></span> <span class="nav-text">need to set a VNC password; run ‘man vncpasswd’ to see how</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#to-do-that"><span class="nav-number"></span> <span class="nav-text">to do that.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DO-NOT-RUN-THIS-SERVICE-if-your-local-area-network-is"><span class="nav-number"></span> <span class="nav-text">DO NOT RUN THIS SERVICE if your local area network is</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#untrusted-For-a-secure-way-of-using-VNC-see"><span class="nav-number"></span> <span class="nav-text">untrusted!  For a secure way of using VNC, see</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#URL-http-www-uk-research-att-com-archive-vnc-sshvnc-html"><span class="nav-number"></span> <span class="nav-text">URL:http://www.uk.research.att.com/archive/vnc/sshvnc.html.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Use-“-nolisten-tcp”-to-prevent-X-connections-to-your-VNC-server-via-TCP"><span class="nav-number"></span> <span class="nav-text">Use “-nolisten tcp” to prevent X connections to your VNC server via TCP.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Use-“-nohttpd”-to-prevent-web-based-VNC-clients-connecting"><span class="nav-number"></span> <span class="nav-text">Use “-nohttpd” to prevent web-based VNC clients connecting.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Use-“-localhost”-to-prevent-remote-VNC-clients-connecting-except-when"><span class="nav-number"></span> <span class="nav-text">Use “-localhost” to prevent remote VNC clients connecting except when</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#doing-so-through-a-secure-tunnel-See-the-“-via”-option-in-the"><span class="nav-number"></span> <span class="nav-text">doing so through a secure tunnel.  See the “-via” option in the</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#man-vncviewer’-manual-page"><span class="nav-number"></span> <span class="nav-text">`man vncviewer’ manual page.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VNCSERVERS-”2-myusername”"><span class="nav-number"></span> <span class="nav-text">VNCSERVERS=”2:myusername”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#VNCSERVERARGS-2-”-geometry-800x600-nolisten-tcp-nohttpd-localhost”"><span class="nav-number"></span> <span class="nav-text">VNCSERVERARGS[2]=”-geometry 800x600 -nolisten tcp -nohttpd -localhost”</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Uncomment-the-following-two-lines-for-normal-desktop"><span class="nav-number"></span> <span class="nav-text">Uncomment the following two lines for normal desktop:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#chkconfig-vncserver-on"><span class="nav-number"></span> <span class="nav-text">chkconfig vncserver on</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Meta"><span class="nav-number">1.</span> <span class="nav-text">Meta</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tip"><span class="nav-number">1.1.</span> <span class="nav-text">Tip</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前言-1"><span class="nav-number">2.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#tmux"><span class="nav-number">3.</span> <span class="nav-text">tmux</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#tmux如何查看历史输出"><span class="nav-number">3.1.</span> <span class="nav-text">tmux如何查看历史输出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#update-alternatives命令详解"><span class="nav-number">3.2.</span> <span class="nav-text">update-alternatives命令详解</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ls-l-usr-bin-java"><span class="nav-number"></span> <span class="nav-text">ls -l /usr/bin/java</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ls-l-etc-alternatives-java"><span class="nav-number"></span> <span class="nav-text">ls -l /etc/alternatives/java</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update-alternatives-–display-java"><span class="nav-number"></span> <span class="nav-text">update-alternatives –display java</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update-alternatives-–config-java-有-3-个候选项可用于替换-java-提供-usr-bin-java"><span class="nav-number"></span> <span class="nav-text">update-alternatives –config java  //有 3 个候选项可用于替换 java (提供 /usr/bin/java)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#选择-路径-优先级-状态"><span class="nav-number">1.</span> <span class="nav-text"> 选择       路径                                       优先级  状态  </span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100"><span class="nav-number"></span> <span class="nav-text">update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update-alternatives-–install-usr-bin-java-java-usr-local-jre1-6-0-20-bin-javac-100-–slave-usr-bin-javac-javac-usr-local-jre1-6-0-20-bin-javac"><span class="nav-number"></span> <span class="nav-text">update-alternatives –install /usr/bin/java java /usr/local/jre1.6.0_20/bin/javac 100 –slave /usr/bin/javac javac /usr/local/jre1.6.0_20/bin/javac</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#update-alternatives-–remove-java-usr-local-jre1-6-0-20-bin-java"><span class="nav-number"></span> <span class="nav-text">update-alternatives –remove java /usr/local/jre1.6.0_20/bin/java</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vim-etc-profile-在最后添加以下内容"><span class="nav-number"></span> <span class="nav-text">vim /etc/profile //在最后添加以下内容</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#perl模块安装"><span class="nav-number">1.</span> <span class="nav-text">perl模块安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#INC-错误时"><span class="nav-number">1.0.1.</span> <span class="nav-text">@INC 错误时</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#autojump"><span class="nav-number">2.</span> <span class="nav-text">autojump</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#putty"><span class="nav-number">3.</span> <span class="nav-text">putty</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#在putty中打开vi时复制文字到windows"><span class="nav-number">3.1.</span> <span class="nav-text">在putty中打开vi时复制文字到windows</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed"><span class="nav-number">4.</span> <span class="nav-text">sed</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ripgrep"><span class="nav-number">5.</span> <span class="nav-text">ripgrep</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找-lib"><span class="nav-number">6.</span> <span class="nav-text">查找 lib</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#configure-lib-not-found"><span class="nav-number">7.</span> <span class="nav-text">configure lib not found</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-build-dep"><span class="nav-number">8.</span> <span class="nav-text">安装 build-dep</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#add-apt-repository"><span class="nav-number">8.1.</span> <span class="nav-text">add-apt-repository</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户管理"><span class="nav-number">9.</span> <span class="nav-text">用户管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rsync命令"><span class="nav-number">10.</span> <span class="nav-text">rsync命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找大于-100M-的文件"><span class="nav-number">11.</span> <span class="nav-text">查找大于 100M 的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ubuntu"><span class="nav-number">12.</span> <span class="nav-text">ubuntu</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VirtualBox"><span class="nav-number">13.</span> <span class="nav-text">VirtualBox</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#压缩-guest-os-占用的大小"><span class="nav-number">13.1.</span> <span class="nav-text">压缩 guest os 占用的大小</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#home"><span class="nav-number">14.</span> <span class="nav-text">home</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#超级终端"><span class="nav-number">15.</span> <span class="nav-text">超级终端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#颜色特效控制："><span class="nav-number">15.1.</span> <span class="nav-text">颜色特效控制：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lsusb-lspci"><span class="nav-number">16.</span> <span class="nav-text">lsusb lspci</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#linux创建指定大小的文件"><span class="nav-number">17.</span> <span class="nav-text">linux创建指定大小的文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改用户名"><span class="nav-number">18.</span> <span class="nav-text">修改用户名</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#出现-zombie-僵尸-进程时"><span class="nav-number">19.</span> <span class="nav-text">出现 zombie (僵尸)进程时</span></a></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">© 2018 — <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiaobuzuji</span>

  

  
</div>


  



  <div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 — <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Gemini</a></div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





  



  






  















  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  

  
  
    
  


  


  

  



  
  


  

  



  
  




  


  



  



  





  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  



  

  





  

  

  



  
  

  
  

  
    
      


<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

  



<script type="text/javascript" src="/bundle.js"></script><script type="text/javascript">var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: '512IeUJDPN8hiFYdzq4jgX9p-gzGzoHsz',
        appKey: '1evObueKdv7R2orsDBktoTew',
        placeholder: 'Please leave your email address, so I can contact you ASAP.',
        avatar:'retro',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });;// Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });;(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();;MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });;MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });</script></body></html>